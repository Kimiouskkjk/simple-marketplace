CREATE DATABASE TrabalhoSQL;
USE TrabalhoSQL;

CREATE TABLE ENTREGADOR(
  ID_ENTREGADOR INT AUTO_INCREMENT,
  NOME_ENTREGADOR VARCHAR(60) NOT NULL,
  LOCALIZACAO_ENTREGADOR VARCHAR(255),
  RASTREIO_ENTREGADOR VARCHAR(255),
  PRIMARY KEY (ID_ENTREGADOR)
);

CREATE TABLE USUARIO(
  ID_USUARIO INT AUTO_INCREMENT,
  NOME_USUARIO VARCHAR(60) NOT NULL,
  ENDERECO_USUARIO VARCHAR(150) NOT NULL,
  PRIMARY KEY (ID_USUARIO)
);

CREATE TABLE PAGAMENTO(
  ID_PAGAMENTO INT AUTO_INCREMENT,
  METODO_DE_PAGAMENTO VARCHAR(20) NOT NULL,
  PRIMARY KEY (ID_PAGAMENTO)
);

CREATE TABLE PRODUTO(
  ID_PRODUTO INT AUTO_INCREMENT,
  NOME_PRODUTO VARCHAR(80) NOT NULL,
  VALOR_PRODUTO DECIMAL(10,2) NOT NULL, 
  DESCRICAO_PRODUTO VARCHAR(255),
  ESTOQUE_PRODUTO INT NOT NULL,
  ID_VENDEDOR INT NOT NULL,
  PRIMARY KEY (ID_PRODUTO)
);

CREATE TABLE VENDEDOR(
  ID_VENDEDOR INT AUTO_INCREMENT,
  NOME_VENDEDOR VARCHAR(60) NOT NULL,
  CNPJ CHAR(14) UNIQUE NOT NULL,
  PRIMARY KEY (ID_VENDEDOR)
);

CREATE TABLE CLIENTE(
  ID_CLIENTE INT AUTO_INCREMENT,
  CPF CHAR(11) UNIQUE NOT NULL,
  ID_USUARIO INT NOT NULL,
  PRIMARY KEY (ID_CLIENTE),
  CONSTRAINT FK_CLIENTE_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)
);

CREATE TABLE PEDIDO(
  ID_PEDIDO INT AUTO_INCREMENT,
  PRIMARY KEY (ID_PEDIDO),
  ID_CLIENTE INT NOT NULL, 
  ID_VENDEDOR INT NOT NULL,
  ID_PRODUTO INT NOT NULL,
  ID_PAGAMENTO INT NOT NULL,

  FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE),
  FOREIGN KEY (ID_VENDEDOR) REFERENCES VENDEDOR(ID_VENDEDOR),
  FOREIGN KEY (ID_PRODUTO) REFERENCES PRODUTO(ID_PRODUTO),
  FOREIGN KEY (ID_PAGAMENTO) REFERENCES PAGAMENTO(ID_PAGAMENTO)
);

ALTER TABLE PRODUTO ADD CONSTRAINT FK_VENDEDOR FOREIGN KEY (ID_VENDEDOR) REFERENCES VENDEDOR(ID_VENDEDOR);